<head>
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Leaderboard</title>

</head>

<body>

<div id="fb-root"></div>

  <div id="interface">
    {{#if currentUser}}
    {{> currentplayer}}
    {{/if}}
      {{loginButtons}}
    <!-- 
      <h3>Click on an individual to give them great work</h3> 
    -->
    {{> messages}}
    {{> leaderboard}}
  </div>
</body>

<template name="currentplayer">
<div class="currentplayer">

    <div class="picture current-picture">
        <figure>
          <img src='https://graph.facebook.com/{{ currentplayer.facebook_id }}/picture' width="70" height="70" />
        </figure>
    </div>

    <div class="current-player-score">
      <span class="current-score">{{currentplayer.score}}</span>
      <span class="current-points">Points</span>
    </div>

</div>
</template>

<template name="leaderboard">
  <div class="leaderboard">
    {{#each players}}
      {{> player}}
    {{/each}}
  </div>
</template>

<template name="player">
  <div class="player {{selected}}" id="{{_id}}">
    <div class="picture">
      <figure>
      {{#if facebook_id}}
        <img src='https://graph.facebook.com/{{ facebook_id }}/picture' width="70" height="70" />
        {{else}}
        <img src="http://placehold.it/70x70" />
      {{/if}}
      </figure>
    </div> <!-- .picture -->
    <div class="player_details">
      <div class="front_card">
        <div class="name_score">
          <span class="name">
            {{name}}
            <p>
              <a href="#" class="show_details" title="Show Details">
                Show details
              </a>
            </p>
            </span>
          <span class="score">{{score}}</span>
        </div>
          <a href="#" class="btn give"><img height='16' src='add-arrow.png'/></a>
      </div> <!-- .name_score -->
      
      <div class="leave_comment">
        <div class="input_form">
          <form>
            <input name="greatMessage" maxlength="300" type="text" class="greatMessage" required="required" placeholder="Enter your great work comment here" />
          </form>
        </div>
        <div class="go_buttons">
          <input type="button" class="inc btn btn-primary" value="give it!" />
        </div> <!-- .leave_comment -->
      </div> <!-- .leave_comment -->

      <div class="accomplishments {{selectedaccomplishment}}">
        {{#if selected_great_works }}
        <h4>Accomplishments</h4>
        <div class="table_head">
          <div class="accomp heading from">
            <span>From</span>
          </div>
          <div class="accomp heading message">
            <span>Message</span>
          </div>
          <div class="accomp heading points">
            <span>Points</span>
          </div>
        </div>
        {{# each selected_great_works}}
          {{> greatwork}}
        {{/each}}
        <a href='#' id='showmore'>Show more</a>
        <a href='#' id='showless'>Show less</a>
        {{/if}}
      </div> <!-- .accomplishments -->
    

      

    </div> <!-- .player_details -->
  
  </div> <!-- .player -->
</template>

<template name="greatwork">
  <div class="accomplishment_text" id="{{_id}}">
    <div class="accomp details from">
      <figure>
        {{#if facebook_id}}
          <img src='https://graph.facebook.com/{{facebook_id }}/picture' width="28" height="28" />
          {{else}}
          <img src="http://placehold.it/28x28" />
        {{/if}}
      </figure>
      <span>  
        {{name}}
      </span>
    </div> <!-- .accomp -->
    <div class="accomp details message">
      <span class="message_text">
        {{message}}
      </span>
      <span>
        {{formatted_time time}}
      </span>
    </div> <!-- .accomp -->
    <div class="accomp details points">
      <span>
        {{# if points}}
          {{points}}
        {{else}}
          5
        {{/if}}
      </span>
    </div> <!-- .accomp -->

  </div>
</template>

<template name="messages">
  <div class='overflowbox chat'>
      <a class="fb_invite" href=#>NEW! Great Work your facebook friends!</a>
    <p>
      ====RECENT GREATNESS====
      <br />
        {{#each messages}}
            <strong>{{name}}</strong> Just Great Worked <strong>{{victim}}</strong>
            <br />
            "{{message}}"
            <br />
            {{formatted_time time}}
        {{/each}}
      <br />
      ====================
    </p>
  </div>
</template>